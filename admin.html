<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Admin — Nenzee.com</title>
  <link rel="stylesheet" href="assets/css/main.css">
</head>

<body>
  <header class="container site-nav" role="banner">
    <a class="skip-link" href="index.html">
      <img src="images/NNZLogo.png" alt="Nenzee.com Home" height="40" width="40">
    </a>
    <nav class="nav-links" role="navigation" aria-label="Main navigation">
      <a href="index.html">Home</a>
      <a href="about.html">About</a>
      <a href="contact.html">Contact</a>
    </nav>
  </header>

  <main class="container">
    <h1>Admin — Moderate Pending Comments</h1>
    <p>Enter the admin passphrase to view pending comments. (Demo only — local use.)</p>

    <label for="admin-pass">Admin passphrase</label><br>
    <input id="admin-pass" type="password">
    <button id="admin-enter" class="btn">Enter</button>

    <div id="admin-area">
      <h2>Pending comments</h2>
      <div id="pending-list"></div>
    </div>
  </main>

  <footer class="site-footer">
    <div>© Nenzee — 2025</div>
  </footer>

  <script>
    const passEl=document.getElementById('admin-pass');
    const btn=document.getElementById('admin-enter');
    const area=document.getElementById('admin-area');
    const list=document.getElementById('pending-list');

    btn.addEventListener('click',()=>{if(passEl.value==='nenzee-admin'){area.style.display='block';loadPending();}else{alert('Incorrect passphrase');}});

    function loadPending(){
      const raw=localStorage.getItem('nenzee_comments');
      const arr=raw?JSON.parse(raw):[];
      const pending=arr.filter((c)=>c.status==='pending');
      list.innerHTML=pending.length?pending.map((c,idx)=>`
        <div class="card">
          <div style="display:flex;justify-content:space-between">
            <div><strong>${c.name}</strong><div class="meta">${c.when}</div></div>
            <div>
              <button class="btn" onclick="handleAction(${idx},'approve')">Approve</button>
              <button class="btn secondary" onclick="handleAction(${idx},'reject')" style="margin-left:8px">Reject</button>
            </div>
          </div>
          <p>${c.body}</p>
        </div>`).join(''):`<div>No pending comments</div>`;
    }

    function handleAction(index,action){
      const raw=localStorage.getItem('nenzee_comments');
      const arr=raw?JSON.parse(raw):[];
      const pending=arr.filter((c)=>c.status==='pending');
      const item=pending[index];
      if(!item)return;
      const globalIndex=arr.findIndex((c)=>c.id===item.id);
      if(action==='approve')arr[globalIndex].status='approved';
      if(action==='reject')arr.splice(globalIndex,1);
      localStorage.setItem('nenzee_comments',JSON.stringify(arr));
      loadPending();
      alert('Action completed.');
    }
  </script>
</body>
</html>